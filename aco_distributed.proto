syntax = "proto3";

package aco_distributed;

service ACOMasterService {
  rpc RequestWork (WorkRequest) returns (WorkAssignment);
  rpc SubmitSolution (Solution) returns (SolutionResponse);
}

message WorkRequest {
  int32 worker_id = 1;
  int64 timestamp = 2;
}

message WorkAssignment {
  int32 num_ants = 1;
  int32 iteration = 2;
  repeated double pheromone_matrix = 3;
  int32 matrix_size = 4;
  repeated double distance_matrix = 5;
  bool finished = 6;
  double alpha = 7;
  double beta = 8;
  repeated int32 start_nodes = 9;
}

message Solution {
  int32 worker_id = 1;
  repeated int32 path = 2;
  double cost = 3;
  int32 iteration = 4;
  int64 timestamp = 5;
}

message SolutionResponse {
  bool accepted = 1;
  double current_best_cost = 2;
  repeated int32 current_best_path = 3;
  string message = 4;
}
